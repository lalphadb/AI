************* Module main
main.py:244:0: C0301: Line too long (133/100) (line-too-long)
main.py:261:0: C0301: Line too long (108/100) (line-too-long)
main.py:544:0: C0301: Line too long (108/100) (line-too-long)
main.py:598:0: C0301: Line too long (121/100) (line-too-long)
main.py:668:0: C0301: Line too long (105/100) (line-too-long)
main.py:914:0: C0303: Trailing whitespace (trailing-whitespace)
main.py:919:0: C0303: Trailing whitespace (trailing-whitespace)
main.py:923:0: C0303: Trailing whitespace (trailing-whitespace)
main.py:931:0: C0303: Trailing whitespace (trailing-whitespace)
main.py:934:113: C0303: Trailing whitespace (trailing-whitespace)
main.py:934:0: C0301: Line too long (113/100) (line-too-long)
main.py:1204:0: C0301: Line too long (108/100) (line-too-long)
main.py:1:0: C0302: Too many lines in module (1425/1000) (too-many-lines)
main.py:20:0: E0401: Unable to import 'chromadb' (import-error)
main.py:22:0: E0401: Unable to import 'fastapi' (import-error)
main.py:34:0: E0401: Unable to import 'fastapi.middleware.cors' (import-error)
main.py:35:0: E0401: Unable to import 'fastapi.security' (import-error)
main.py:36:0: E0401: Unable to import 'fastapi.staticfiles' (import-error)
main.py:132:4: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
main.py:194:4: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
main.py:211:11: W0718: Catching too general exception Exception (broad-exception-caught)
main.py:437:22: W0613: Unused argument 'message' (unused-argument)
main.py:507:4: R1705: Unnecessary "else" after "return", remove the "else" and de-indent the code inside it (no-else-return)
main.py:516:8: W0702: No exception type(s) specified (bare-except)
main.py:543:8: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
main.py:548:8: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
main.py:551:8: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
main.py:552:8: C0415: Import outside toplevel (json) (import-outside-toplevel)
main.py:562:8: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
main.py:567:8: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
main.py:587:8: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
main.py:646:4: W0621: Redefining name 'os' from outer scope (line 11) (redefined-outer-name)
main.py:646:4: W0404: Reimport 'os' (imported line 11) (reimported)
main.py:646:4: C0415: Import outside toplevel (os) (import-outside-toplevel)
main.py:653:15: W0718: Catching too general exception Exception (broad-exception-caught)
main.py:652:16: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
main.py:654:12: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
main.py:660:39: W0621: Redefining name 'params' from outer scope (line 359) (redefined-outer-name)
main.py:687:11: W0718: Catching too general exception Exception (broad-exception-caught)
main.py:693:0: C0413: Import "from engine import react_loop" should be placed at the top of the module (wrong-import-position)
main.py:699:19: W0621: Redefining name 'app' from outer scope (line 723) (redefined-outer-name)
main.py:708:15: W0718: Catching too general exception Exception (broad-exception-caught)
main.py:709:12: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
main.py:699:19: W0613: Unused argument 'app' (unused-argument)
main.py:751:0: C0115: Missing class docstring (missing-class-docstring)
main.py:758:0: C0115: Missing class docstring (missing-class-docstring)
main.py:766:0: C0116: Missing function or method docstring (missing-function-docstring)
main.py:771:0: C0116: Missing function or method docstring (missing-function-docstring)
main.py:867:27: W0613: Unused argument 'current_user' (unused-argument)
main.py:880:4: W0613: Unused argument 'current_user' (unused-argument)
main.py:892:4: W0613: Unused argument 'current_user' (unused-argument)
main.py:902:4: W0613: Unused argument 'current_user' (unused-argument)
main.py:947:8: C0415: Import outside toplevel (tools.get_tool_count, tools.get_tools_definitions) (import-outside-toplevel)
main.py:972:4: C0415: Import outside toplevel (tools.reload_tools) (import-outside-toplevel)
main.py:976:4: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
main.py:966:4: W0613: Unused argument 'current_user' (unused-argument)
main.py:989:4: W0621: Redefining name 'subprocess' from outer scope (line 13) (redefined-outer-name)
main.py:989:4: W0404: Reimport 'subprocess' (imported line 13) (reimported)
main.py:989:4: C0415: Import outside toplevel (subprocess) (import-outside-toplevel)
main.py:1057:11: W0718: Catching too general exception Exception (broad-exception-caught)
main.py:1000:21: W1510: 'subprocess.run' used without explicitly defining the value for 'check'. (subprocess-run-check)
main.py:1008:23: W1510: 'subprocess.run' used without explicitly defining the value for 'check'. (subprocess-run-check)
main.py:1012:21: W1510: 'subprocess.run' used without explicitly defining the value for 'check'. (subprocess-run-check)
main.py:1028:17: W1514: Using open without explicitly specifying an encoding (unspecified-encoding)
main.py:1041:24: W1510: 'subprocess.run' used without explicitly defining the value for 'check'. (subprocess-run-check)
main.py:1049:21: W1510: 'subprocess.run' used without explicitly defining the value for 'check'. (subprocess-run-check)
main.py:1070:8: W0707: Consider explicitly re-raising using 'raise HTTPException(status_code=500, detail=str(e)) from e' (raise-missing-from)
main.py:1075:26: W0613: Unused argument 'current_user' (unused-argument)
main.py:1124:0: R0914: Too many local variables (22/15) (too-many-locals)
main.py:1248:11: W0718: Catching too general exception Exception (broad-exception-caught)
main.py:1155:16: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
main.py:1158:16: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
main.py:1144:4: R1702: Too many nested blocks (6/5) (too-many-nested-blocks)
main.py:1208:23: W0718: Catching too general exception Exception (broad-exception-caught)
main.py:1216:23: W0718: Catching too general exception Exception (broad-exception-caught)
main.py:1246:19: W0718: Catching too general exception Exception (broad-exception-caught)
main.py:1249:8: C0415: Import outside toplevel (traceback) (import-outside-toplevel)
main.py:1251:8: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
main.py:1253:8: C0415: Import outside toplevel (traceback) (import-outside-toplevel)
main.py:1255:8: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
main.py:1124:0: R0912: Too many branches (24/12) (too-many-branches)
main.py:1124:0: R0915: Too many statements (76/50) (too-many-statements)
main.py:1295:4: W0621: Redefining name 'subprocess' from outer scope (line 13) (redefined-outer-name)
main.py:1294:4: C0415: Import outside toplevel (json) (import-outside-toplevel)
main.py:1295:4: W0404: Reimport 'subprocess' (imported line 13) (reimported)
main.py:1295:4: C0415: Import outside toplevel (subprocess) (import-outside-toplevel)
main.py:1320:11: W0718: Catching too general exception Exception (broad-exception-caught)
main.py:1298:17: W1510: 'subprocess.run' used without explicitly defining the value for 'check'. (subprocess-run-check)
main.py:1317:16: W0702: No exception type(s) specified (bare-except)
main.py:1321:8: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
main.py:1354:11: W0718: Catching too general exception Exception (broad-exception-caught)
main.py:1336:13: W1514: Using open without explicitly specifying an encoding (unspecified-encoding)
main.py:1332:4: W0613: Unused argument 'current_user' (unused-argument)
main.py:1361:4: C0415: Import outside toplevel (tools.get_tool_count) (import-outside-toplevel)
main.py:1385:11: W0718: Catching too general exception Exception (broad-exception-caught)
main.py:1400:11: W0718: Catching too general exception Exception (broad-exception-caught)
main.py:1408:11: W0718: Catching too general exception Exception (broad-exception-caught)
main.py:1405:17: W1510: 'subprocess.run' used without explicitly defining the value for 'check'. (subprocess-run-check)
main.py:1417:7: W0718: Catching too general exception Exception (broad-exception-caught)
main.py:354:4: C0412: Imports from package tools are not grouped (ungrouped-imports)
main.py:49:4: W0611: Unused CommandNotAllowedError imported from security (unused-import)
main.py:49:4: W0611: Unused PathNotAllowedError imported from security (unused-import)
main.py:49:4: W0611: Unused is_path_allowed imported from security (unused-import)
main.py:49:4: W0611: Unused validate_path imported from security (unused-import)
main.py:65:4: W0611: Unused APIKey imported from auth (unused-import)
main.py:65:4: W0611: Unused User imported from auth (unused-import)
main.py:65:4: W0611: Unused UserUpdate imported from auth (unused-import)
main.py:65:4: W0611: Unused get_current_user imported from auth (unused-import)
main.py:65:4: W0611: Unused get_user imported from auth (unused-import)
main.py:65:4: W0611: Unused require_scope imported from auth (unused-import)
main.py:65:4: W0611: Unused update_user imported from auth (unused-import)
main.py:98:4: W0611: Unused rate_limiter imported from rate_limiter (unused-import)
main.py:106:4: W0611: Unused MODELS imported from config as CONFIG_MODELS (unused-import)
main.py:107:4: W0611: Unused get_settings imported from config (unused-import)
main.py:115:4: W0611: Unused build_system_prompt imported from prompts (unused-import)
main.py:115:4: W0611: Unused get_initial_memory_prompt imported from prompts (unused-import)
main.py:115:4: W0611: Unused get_urgency_message imported from prompts (unused-import)
main.py:124:4: W0611: Unused get_tools_description imported from tools (unused-import)
main.py:126:4: W0611: Unused run_command_async imported from utils.async_subprocess (unused-import)
main.py:126:4: W0611: Unused run_multiple_commands imported from utils.async_subprocess (unused-import)
main.py:135:4: W0611: Unused get_dynamic_context imported from dynamic_context (unused-import)
main.py:174:4: W0611: Unused get_memory_stats imported from auto_learn (unused-import)
main.py:174:4: W0611: Unused get_user_preferences imported from auto_learn (unused-import)
************* Module auth
auth.py:16:0: E0401: Unable to import 'fastapi' (import-error)
auth.py:17:0: E0401: Unable to import 'fastapi.security' (import-error)
auth.py:49:0: C0115: Missing class docstring (missing-class-docstring)
auth.py:56:0: C0115: Missing class docstring (missing-class-docstring)
auth.py:61:0: C0115: Missing class docstring (missing-class-docstring)
auth.py:70:0: C0115: Missing class docstring (missing-class-docstring)
auth.py:74:0: C0115: Missing class docstring (missing-class-docstring)
auth.py:81:0: C0115: Missing class docstring (missing-class-docstring)
auth.py:87:0: C0115: Missing class docstring (missing-class-docstring)
auth.py:165:8: C0415: Import outside toplevel (config.get_settings) (import-outside-toplevel)
auth.py:206:11: W0718: Catching too general exception Exception (broad-exception-caught)
auth.py:227:8: C0415: Import outside toplevel (json) (import-outside-toplevel)
auth.py:250:8: C0415: Import outside toplevel (json) (import-outside-toplevel)
auth.py:293:8: W0707: Consider explicitly re-raising using 'except Exception as exc' and 'raise HTTPException(status_code=status.HTTP_400_BAD_REQUEST, detail='Username already exists') from exc' (raise-missing-from)
auth.py:436:4: C0415: Import outside toplevel (json) (import-outside-toplevel)
auth.py:475:8: C0415: Import outside toplevel (json) (import-outside-toplevel)
auth.py:527:4: W0613: Unused argument 'request' (unused-argument)
************* Module security
security.py:145:4: W0107: Unnecessary pass statement (unnecessary-pass)
security.py:151:4: W0107: Unnecessary pass statement (unnecessary-pass)
security.py:157:4: W0107: Unnecessary pass statement (unnecessary-pass)
security.py:179:8: W0707: Consider explicitly re-raising using 'except Exception as exc' and 'raise PathNotAllowedError(f'Chemin invalide: {path}') from exc' (raise-missing-from)
security.py:183:8: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
security.py:205:12: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
security.py:283:8: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
security.py:289:12: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
security.py:293:4: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
security.py:306:0: C0116: Missing function or method docstring (missing-function-docstring)
security.py:327:15: W0718: Catching too general exception Exception (broad-exception-caught)
security.py:328:12: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
security.py:335:8: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
security.py:337:4: R0913: Too many arguments (6/5) (too-many-arguments)
security.py:337:4: R0917: Too many positional arguments (6/5) (too-many-positional-arguments)
security.py:347:8: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
security.py:354:8: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
security.py:358:8: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
************* Module config
config.py:56:4: C0116: Missing function or method docstring (missing-function-docstring)
config.py:86:4: C0115: Missing class docstring (missing-class-docstring)
config.py:86:4: R0903: Too few public methods (0/2) (too-few-public-methods)
************* Module engine
engine.py:176:0: C0303: Trailing whitespace (trailing-whitespace)
engine.py:198:0: C0301: Line too long (127/100) (line-too-long)
engine.py:207:0: C0301: Line too long (108/100) (line-too-long)
engine.py:270:0: C0301: Line too long (102/100) (line-too-long)
engine.py:279:0: C0301: Line too long (113/100) (line-too-long)
engine.py:293:0: C0301: Line too long (102/100) (line-too-long)
engine.py:387:0: C0301: Line too long (118/100) (line-too-long)
engine.py:15:0: E0401: Unable to import 'fastapi' (import-error)
engine.py:34:0: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
engine.py:75:0: R0912: Too many branches (13/12) (too-many-branches)
engine.py:142:0: R0913: Too many arguments (6/5) (too-many-arguments)
engine.py:142:0: R0917: Too many positional arguments (6/5) (too-many-positional-arguments)
engine.py:142:0: R0914: Too many local variables (50/15) (too-many-locals)
engine.py:152:4: C0415: Import outside toplevel (prompts.build_system_prompt, prompts.classify_query, prompts.get_urgency_message, prompts.get_factual_prompt) (import-outside-toplevel)
engine.py:153:4: C0415: Import outside toplevel (dynamic_context.get_dynamic_context) (import-outside-toplevel)
engine.py:154:4: C0415: Import outside toplevel (tools.get_tools_description) (import-outside-toplevel)
engine.py:158:4: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
engine.py:174:15: W0718: Catching too general exception Exception (broad-exception-caught)
engine.py:175:12: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
engine.py:211:11: W0718: Catching too general exception Exception (broad-exception-caught)
engine.py:198:16: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
engine.py:210:16: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
engine.py:212:8: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
engine.py:321:15: W0718: Catching too general exception Exception (broad-exception-caught)
engine.py:292:32: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
engine.py:301:24: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
engine.py:328:8: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
engine.py:334:12: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
engine.py:339:12: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
engine.py:355:12: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
engine.py:373:12: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
engine.py:392:4: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
engine.py:142:0: R0912: Too many branches (42/12) (too-many-branches)
engine.py:142:0: R0915: Too many statements (133/50) (too-many-statements)
engine.py:145:4: W0613: Unused argument 'conversation_id' (unused-argument)
engine.py:152:4: W0611: Unused get_factual_prompt imported from prompts (unused-import)
engine.py:20:4: W0611: Unused get_search_service imported from services.rag (unused-import)
engine.py:1:0: R0801: Similar lines in 2 files
==config:[123:128]
==main:[229:234]
MODELS = {
    "auto": {
        "name": "AUTO (Sélection automatique)",
        "description": "L'agent choisit le meilleur modèle selon la tâche",
        "model": None, (duplicate-code)

------------------------------------------------------------------
Your code has been rated at 8.20/10 (previous run: 8.20/10, +0.00)

