[tool.ruff]
# Configuration de base pour l'audit et la standardisation
line-length = 100
target-version = "py312"

# Exclusions des fichiers "bruit" identifiÃ©s lors de l'audit
exclude = [
    "*.backup",
    "*.backup.*",
    "*.broken",
    "*.old",
    "_backups",
    "__pycache__",
    "venv",
    ".env",
    "integration_example.py",
    "memory_patch.py"
]

[tool.ruff.lint]
# E: pycodestyle errors
# W: pycodestyle warnings
# F: pyflakes
# I: isort
# B: flake8-bugbear
# S: flake8-bandit (security rules)
# C4: flake8-comprehensions
# UP: pyupgrade (Python upgrade suggestions)
select = ["E", "W", "F", "I", "B", "S", "C4", "UP"]
ignore = [
    "E501",  # Line too long - on ignore pour l'instant
    "B008",  # Function call in default argument - normal pour FastAPI Depends()
]

[tool.ruff.lint.per-file-ignores]
# Allow assert statements, hardcoded passwords and temp file paths in test files
"tests/*" = ["S101", "S105", "S106", "S108"]
"test_*.py" = ["S101", "S105", "S106", "S108"]
"**/tests.py" = ["S101", "S105", "S106", "S108"]  # RAG tests.py
# Tools and main may use partial path commands and temp files for system operations
"tools/*.py" = ["S607"]
"main.py" = ["S607", "S108"]  # System monitoring endpoints
"security.py" = ["S108"]  # Allowed paths definition
"services/self_healing.py" = ["S607"]  # Docker health checks

[tool.ruff.format]
quote-style = "double"
indent-style = "space"
skip-magic-trailing-comma = false
line-ending = "auto"

[tool.pylint.main]
# Pylint configuration for achieving score >= 9.0
# Align with Ruff configuration (line-length 100, Python 3.12)
py-version = "3.12"

[tool.pylint.format]
max-line-length = 100

[tool.pylint.messages_control]
# Disable warnings that are acceptable for this codebase
disable = [
    # Code style - aligned with Ruff's E501 ignore
    "C0301",  # line-too-long - handled by Ruff/formatter
    "C0302",  # too-many-lines - main.py is large by design
    # Import-related
    "E0401",  # import-error - some deps not in audit venv
    "C0413",  # wrong-import-position - dynamic imports needed
    "C0415",  # import-outside-toplevel - lazy loading pattern
    "W0404",  # reimported - sometimes needed in functions
    # Logging style - f-strings are acceptable in modern Python
    "W1203",  # logging-fstring-interpolation
    # Design patterns
    "R0801",  # duplicate-code - config MODELS dict repeated
    "R0903",  # too-few-public-methods - config/model classes
    "R0912",  # too-many-branches - complex react loop
    "R0913",  # too-many-arguments - API functions
    "R0914",  # too-many-locals - complex functions
    "R0915",  # too-many-statements - main loop logic
    "R0917",  # too-many-positional-arguments - API functions
    "R1705",  # no-else-return - explicit returns preferred
    # Exception handling
    "W0702",  # bare-except - sometimes needed for catch-all
    "W0718",  # broad-exception-caught - catch-all patterns
    # Variable naming
    "W0613",  # unused-argument - API compatibility
    "W0621",  # redefined-outer-name - closure patterns
    # Documentation - TODO: add docstrings later
    "C0115",  # missing-class-docstring
    "C0116",  # missing-function-docstring
]

[tool.pylint.design]
# Increase limits for complex modules
max-args = 10
max-locals = 50
max-branches = 50
max-statements = 150
